<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta content="width=device-width,user-scalable=0,initial-scale=1,maximum-scale=1" name="viewport">
    <meta name="format-detection" content="telephone=no">
    <link rel="shortcut icon" type="image/x-icon" href="" />
    <title>管理组成员</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="stylesheet" href="/xs/stylesheets/datapicker.css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="/xs/stylesheets/common.css" media="screen" charset="utf-8">
</head>

<body>
    <div class="header">
        <a href="javascript:;" class="icon-close"></a>
        <h2>管理组成员</h2>
        <a class="right_btn" id="edit" href="javascript:;">编辑</a>
    </div>

    <div class="search_bar">
        <span></span>
        <div class="search_input">
            <input type="text" placeholder="搜索">
        </div>
    </div>

    <div class="view_list admin_list">
        <a href="javascript:;" class="v_one" id="1">
            <div class="v_wrap">
                <div class="avatar">
                    <img src="" alt="头像">
                    <span class="check"></span>
                </div>
                <div class="info">
                    <h2>昵称（名家）</h2>
                </div>
            </div>
        </a>
        <a href="javascript:;" class="v_one" id="2">
            <div class="v_wrap">
                <div class="avatar">
                    <img src="" alt="头像">
                    <span class="check"></span>
                </div>
                <div class="info">
                    <h2>昵称（名家）</h2>
                </div>
            </div>
        </a>
        <a href="javascript:;" class="v_one" id="3">
            <div class="v_wrap">
                <div class="avatar">
                    <img src="" alt="头像">
                    <span class="check"></span>
                </div>
                <div class="info">
                    <h2>昵称（名家）</h2>
                </div>
            </div>
        </a>
    </div>
    <div class="edit_footer">
        <a href="javascript:;" class="check_all">
            <span>全选</span>
        </a>
        <a href="javascript:;" class="add">
            <span>添加</span>
        </a>
        <a href="javascript:;" class="change_admin">
            <span>更换管理员</span>
        </a>
        <a href="javascript:;" class="delete">
            <span>删除</span>
        </a>
    </div>
</body>
<script src="/xs/bower_components/jquery/dist/jquery.min.js" charset="utf-8"></script>
<script type="text/javascript">
    $(function() {
        $("#edit").click(function() {
            var othis = $(this);
            if (othis.hasClass("active")) {
                othis.removeClass("active").text("编辑");
                $("body").removeClass("hasfooter");
                $(".edit_footer").removeClass("show");
                $(".view_list").removeClass("edit");
                $(".v_one").removeClass("active");
                $(".check_all").removeClass("active");
            } else {
                othis.addClass("active").text("完成");
                $("body").addClass("hasfooter");
                $(".edit_footer").addClass("show");
                $(".view_list").addClass("edit");
            }
        })
        $(".view_list").on("click", ".v_one", function() {
            var othis = $(this);
            if ($(".view_list").hasClass("edit")) {
                othis.toggleClass("active");
                if ($(".v_one.active").length == $(".v_one").length) {
                    $(".check_all").addClass("active");
                } else {
                    $(".check_all").removeClass("active")
                }

                //选中成员id数组 —— test
                var arr = getIdArr();
                console.log(arr);
            }
        })

        $(".check_all").click(function() {
            var othis = $(this);
            if (othis.hasClass("active")) {
                othis.removeClass("active");
                $(".v_one").removeClass("active");

                //选中成员id数组 —— test
                var arr = getIdArr();
                console.log(arr);
            } else {
                othis.addClass("active");
                $(".v_one").addClass("active");

                //选中成员id数组 —— test
                var arr = getIdArr();
                console.log(arr);
            }
        })

        //获取需要操作的成员id数组
        function getIdArr() {
            var arr = [];
            $(".v_one.active").each(function() {
                arr.push($(this).attr("id"))
            })
            return arr;
        }
    })
</script>

</html>
