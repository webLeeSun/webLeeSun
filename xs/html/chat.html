<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta content="width=device-width,user-scalable=0,initial-scale=1,maximum-scale=1" name="viewport">
    <meta name="format-detection" content="telephone=no">
    <link rel="shortcut icon" type="image/x-icon" href="" />
    <title>讨论组1：儿童口才班</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="stylesheet" href="/xs/stylesheets/iscroll.css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="/xs/stylesheets/swiper-3.3.1.min.css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="/xs/stylesheets/common.css" media="screen" charset="utf-8">
</head>

<body onload="loaded()">
    <div class="header">
        <a href="javascript:;" class="icon-back"></a>
        <h2>讨论组1：儿童口才班</h2>

        <!-- +按钮 -->
        <a href="/xs/html/discussion-group/admin/group.html" target="_blank" class="control_btn"></a>
        <!-- 管理员控制按钮 -->
        <div class="cor"></div>
        <div class="control_panel">
            <div class="active"><span class="voice_on">开启发言</span></div>
            <div><span class="voice_off">关闭发言</span></div>
            <div><span class="members">查看小组信息</span></div>
        </div>


        <!-- 头像按钮 -->
        <!-- <a href="javascript:;" class="user_btn"></a> -->

        <!-- 更多按钮 -->
        <!-- <a href="javascript:;" class="more_btn"></a> -->
    </div>

    <!-- 0722 add -->
    <span class="history_info">历史消息</span>

    <div id="wrapper">
        <div id="scroller">
            <div class="chat_box" id="chat">
                <span class="tip">您已关闭学员组发言</span>
                <span class="time">2016-06-28  17：29：30</span>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span><b class="cor"></b>容聊天容</span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span><b class="cor"></b>容聊天容</span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span><b class="cor"></b>容聊天容</span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span><b class="cor"></b>容聊天容</span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span><b class="cor"></b>容聊天容</span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span><b class="cor"></b>聊天测聊天测试内容聊天测试内容</span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span><b class="cor"></b>聊天测试测试内内容</span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span><b class="cor"></b>聊天测试内聊天测试内容聊天测试内容</span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <!-- 0722 add -->
                        <span class="voice_bar">
                          <b class="cor"></b>
                          <audio src="/xs/mp3/test.mp3" controls="controls">
                              Your browser does not support the audio element.
                          </audio>
                          <i class="voice_1"></i>
                          <i class="voice_2"></i>
                          <i class="voice_3"></i>
                        </span>
                    </div>
                </div>
                <div class="msg out">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <span><b class="cor"></b>聊天测试内试内容</span>
                    </div>
                </div>
                <div class="msg out">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <!-- 0722 add -->
                        <span class="voice_bar">
                          <b class="cor"></b>
                          <audio src="/xs/mp3/test.mp3" controls="controls">
                              Your browser does not support the audio element.
                          </audio>
                          <i class="voice_1"></i>
                          <i class="voice_2"></i>
                          <i class="voice_3"></i>
                        </span>
                    </div>
                </div>
                <div class="msg out">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <span><b class="cor"></b>聊天测试内容聊天测试内容聊天测试内容聊天测试内容聊天测试内容</span>
                    </div>
                </div>

                <!-- 0726 add -->
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span class="file">
                          <b class="cor"></b>
                          <a href="/xs/video/test.txt" download="file" class="file_wrap">
                            <div class="icon">22.4KB</div>
                            <p>学声公开课微信在线互动交流公开课等等等</p>
                          </a>
                        </span>
                    </div>
                </div>
                <div class="msg out">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span class="file">
                          <b class="cor"></b>
                          <a href="/xs/video/test.rar" class="file_wrap">
                            <div class="icon">22.4KB</div>
                            <p>学声公开课微信在线互动交流公开课等等等学</p>
                          </a>
                        </span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span class="voice_file">
                          <b class="cor"></b>
                          <a href="/xs/video/test.mp3" download="file" class="file_wrap">
                            <div class="icon">22.4KB</div>
                            <p>学声公开课微信在线互动交流.mp3</p>
                          </a>
                        </span>
                    </div>
                </div>
                <div class="msg out">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span class="voice_file">
                          <b class="cor"></b>
                          <a href="/xs/video/test.mp3" download="file" class="file_wrap">
                            <div class="icon">22.4KB</div>
                            <p>学声公开课微信在线互动交流.mp3</p>
                          </a>
                        </span>
                    </div>
                </div>
                <div class="msg in">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span class="video_bar">
                          <b class="cor"></b>
                          <video>
                            <source src="/xs/video/mov_bbb.mp4" type="video/mp4" />
                            Your browser does not support HTML5 video.
                          </video>
                          <img class="video_hoder" src="/xs/images/video_hoder.png">
                          <i class="timer">13:23</i>
                        </span>
                    </div>
                </div>
                <div class="msg out">
                    <div class="avatar">
                        <img src="/xs/images/class_demo.png">
                    </div>
                    <div class="info">
                        <h3>王一（导师）</h3>
                        <span class="video_bar">
                          <b class="cor"></b>
                          <video>
                            <source src="/xs/video/mov_bbb.mp4" type="video/mp4" />
                            Your browser does not support HTML5 video.
                          </video>
                          <img class="video_hoder" src="/xs/images/video_hoder.png">
                          <i class="timer">13:23</i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="chat_footer">
        <div class="add">
            <form class="form-horizontal" role="form" id="myForm" action="/upload_image.do" method="post" enctype="multipart/form-data">
                <input type="file" id="newImg" name="file" capture="camera">
            </form>
        </div>
        <div class="send_message" id="send_message">发送</div>
        <div class="voice"></div>
        <div class="input_box">
            <span class="emoj"></span>
            <div class="input_wrap">
                <form onsubmit="onSubmit(); return false;">
                    <input type="text" id="text_input">
                </form>
            </div>

            <div class="voice_on_btn">按住 说话</div>
        </div>
    </div>
    <div class="mic_pop">
        <div class="mic_wrap">
            <img class="voice_img" src="/xs/images/mic.png">
            <div class="voice_bar saying"></div>
        </div>
    </div>

    <div class="emoj_box">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <ul>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_1.png" alt="">
                            </div>
                            <span>查作业</span>
                        </li>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_2.png" alt="">
                            </div>
                            <span>到</span>
                        </li>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_3.gif" alt="">
                            </div>
                            <span>点名了</span>
                        </li>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_4.gif" alt="">
                            </div>
                            <span>点名了</span>
                        </li>
                        <span class="justify_fix"></span>
                    </ul>
                    <ul>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_5.png" alt="">
                            </div>
                            <span>哈哈哈</span>
                        </li>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_6.png" alt="">
                            </div>
                            <span>怒赞</span>
                        </li>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_7.jpg" alt="">
                            </div>
                            <span>通知</span>
                        </li>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_8.png" alt="">
                            </div>
                            <span>休息一下</span>
                        </li>
                        <span class="justify_fix"></span>
                    </ul>
                </div>
                <div class="swiper-slide">
                    <ul>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_9.gif" alt="">
                            </div>
                            <span>哈哈哈</span>
                        </li>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_10.jpg" alt="">
                            </div>
                            <span>怒赞</span>
                        </li>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_11.gif" alt="">
                            </div>
                            <span>通知</span>
                        </li>
                        <li>
                            <div class="emoj_img">
                                <img src="../images/emoj/emoj_12.gif" alt="">
                            </div>
                            <span>休息一下</span>
                        </li>
                        <span class="justify_fix"></span>
                    </ul>
                </div>
            </div>
            <!-- Add Pagination -->
            <div class="swiper-pagination"></div>
        </div>
    </div>
</body>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="text/javascript"></script>
<script src="/xs/bower_components/jquery/dist/jquery.min.js" charset="utf-8"></script>
<script src="/xs/js/iscroll-lite.js" charset="utf-8"></script>
<script src="/xs/js/swiper-3.3.1.jquery.min.js" charset="utf-8"></script>
<script src="/xs/js/chat.js" charset="utf-8"></script>
<script src="/xs/js/voice.js" charset="utf-8"></script>
<script type="text/javascript">
    // 0722 add
    //微信中图片预览接口，公众号中图片点击放大左右滑动效果
    wx.ready(function() {
        var srcList = [];
        //这里的img给需要放大的图片添加class，来绑定事件，避免放大不需要的img标签
        $.each($('.yourClassName'), function(i, item) {
            if (item.src) {
                srcList.push(item.src);
                $(item).click(function(e) {
                    alert(12)
                    wx.previewImage({
                        current: item.src, // 当前显示图片的http链接
                        urls: srcList // 需要预览的图片http链接列表
                    });
                });
            }
        });
    });
    // 0722 add
    $(".history_info").click(function() {
        //get more info
        console.log("get more");
        alert(1)
    })

    //0722 add
    /*新增播放控制*/
    $(".chat_box").on('click', '.voice_bar', function(event) {
        event.preventDefault();
        //清除所有正在播放的动画
        var othis = $(this);
        var currentAudio = othis.find('audio')[0];

        //如果当前项正在播放，则清除动画、重置时间、停止播放
        if (!currentAudio.paused) {
            othis.removeClass('active');
            currentAudio.currentTime = 0;
            currentAudio.pause();
        } else {
            $('.voice_bar').removeClass('active');
            //停止所有播放的audio
            for (var i = 0; i < $('audio').length; i++) {
                $('audio')[i].currentTime = 0;
                $('audio')[i].pause();
            }
            //当前项开会播放动画
            othis.addClass('active')
                //重置播放时间，开始播放
            currentAudio.addEventListener('ended', function() {
                othis.removeClass('active');
            }, false);
            currentAudio.currentTime = 0;
            currentAudio.play();
        }
    });

    //0726 add
    /*视频播放*/
    $(".chat_box").on('click', '.video_bar', function(event) {
        event.preventDefault();

        //停止所有播放的video
        for (var i = 0; i < $('video').length; i++) {
            $('video')[i].currentTime = 0;
            $('video')[i].pause();
        }

        var othis = $(this);
        var currentvideo = othis.find('video')[0];
        currentvideo.play();
    });
</script>

</html>
